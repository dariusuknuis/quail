name: "HIERARCHICALSPRITEDEF"
hasTag: true
note: "Wld Hierarchical Sprite Definition"

properties:

  - name: "NUMDAGS"
    note: "Number of DAG nodes in the hierarchy"
    args:
      - name: "count"
        note: "Number of DAG entries"
        format: "%d"
    properties:

      - name: "DAG"
        note: "A DAG entry"

      - name: "TAG"
        note: "The DAG node tag name"
        args:
          - name: "tag"
            note: "DAG tag identifier"
            format: "%s"

      - name: "SPRITETAG"
        note: "Referenced sprite tag"
        args:
          - name: "sprite tag"
            note: "Sprite definition tag"
            format: "%s"

      - name: "SPRITEINDEX"
        note: "Index of sprite tag reference"
        args:
          - name: "sprite index"
            note: "Sprite tag index"
            format: "%d"

      - name: "TRACK"
        note: "Referenced track tag"
        args:
          - name: "track tag"
            note: "Track definition tag"
            format: "%s"

      - name: "TRACKINDEX"
        note: "Index of track reference"
        args:
          - name: "track index"
            note: "Track index value"
            format: "%d"

      - name: "SUBDAGLIST"
        note: "List of child DAG indices"
        args:
          - name: "subdag data"
            note: "Count followed by subdag indices"
            format: "%d..."
            example: "2 1 3"

  - name: "NUMATTACHEDSKINS"
    note: "Number of attached skins"
    args:
      - name: "count"
        note: "Number of attached skins"
        format: "%d"
    properties:

      - name: "ATTACHEDSKIN"
        note: "Attached skin entry"

      - name: "DMSPRITE"
        note: "Referenced DMSPRITE tag"
        args:
          - name: "dmsprite tag"
            note: "DMSPRITE definition tag"
            format: "%s"

      - name: "DMSPRITEINDEX"
        note: "Index of DMSPRITE reference"
        args:
          - name: "dmsprite index"
            note: "DMSPRITE index value"
            format: "%d"

      - name: "LINKSKINUPDATESTODAGINDEX"
        note: "Index of DAG this skin updates"
        args:
          - name: "dag index"
            note: "DAG index this skin attaches to"
            format: "%d"

  - name: "POLYHEDRON"
    note: "Collision polyhedron definition"

  - name: "SPRITE"
    note: "Reference to polyhedron tag or SPECIAL_COLLISION"
    args:
      - name: "polyhedron tag"
        note: "Polyhedron definition tag"
        format: "%s"

  - name: "CENTEROFFSET?"
    note: "Optional center offset vector"
    args:
      - name: "x"
        note: "Center offset X"
        format: "%0.8e"
      - name: "y"
        note: "Center offset Y"
        format: "%0.8e"
      - name: "z"
        note: "Center offset Z"
        format: "%0.8e"

  - name: "BOUNDINGRADIUS?"
    note: "Optional bounding radius"
    args:
      - name: "radius"
        note: "Bounding sphere radius"
        format: "%0.8e"

  - name: "HAVEATTACHEDSKINS"
    note: "If 1, attached skins are present (0x200 flag)"
    description: >
      If you have an attached skin, it must be 1.
      If meshes are attached only to DAGs and not directly to the HS_DEF,
      this should be 0.
    args:
      - name: "flag"
        note: "Attached skins enabled flag"
        format: "%d"

  - name: "DAGCOLLISIONS"
    note: "Enable DAG-based collision (0x20000 flag)"
    args:
      - name: "flag"
        note: "DAG collision flag"
        format: "%d"
